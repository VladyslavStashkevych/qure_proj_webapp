@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@using Microsoft.AspNetCore.Http.Features
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    string theme;
    Html.Raw(theme = HttpContextAccessor.HttpContext.Request.Cookies["theme"]);
}

<header class="header">
	<div class="container">
		<div class="header__row">
			<div class="header__logo">
				<div class="header__logotext">qr</div>
			</div>
			<div class="header__title">qure</div>
            <div id="cookies" style="all:initial">
			    <button type="button" class="header__ntsnbtn" id="switchMod" data-dismiss="alert" data-cookie-string="@theme">
				    <span class="material-symbols-outlined">dark_mode</span>
			    </button>
            </div>
		</div>
	</div>
    <script>
        let button = document.getElementById("cookies");
        button.onclick = function () {

            let value = "";
            let name = "theme" + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for(let i = 0; i <ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                  c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                  value = c.substring(name.length, c.length);
                }
            }

            const d = new Date();
            d.setTime(d.getTime() + (365*24*60*60*1000));
            let expires = "expires="+ d.toUTCString();
            if (value == "dark") {
                document.cookie = "theme" + "=" + "light" + ";" + expires + ";path=/";
            } else {
                document.cookie = "theme" + "=" + "dark" + ";" + expires + ";path=/";
            }

        }
    </script>
</header>